---
title: "[C++] 배열의 동적 할당"
excerpt: "배열의 동적 할당에 대해 알아보자"

categories:
  - Cpp
tags:
  - [Cpp, 포인터, 동적 할당]

toc: true
toc_sticky: true

last_modified_at: 2021-07-18
---

단일 변수 뿐만 아니라 배열도 동적 할당할 수 있다.

배열의 동적 할당은 `컴파일 타임`에 배열의 길이를 정하거나 생략이 가능한 일반적인 배열과는 다르게,   
`런 타임`에 배열의 길이를 선택할 수 있다. (일반적인 배열의 길이는 상수이다.)

이것의 단점으로는 배열의 길이를 알 수 없고, 길이를 생략할 수 없다는 것이다.   
(`sizeof` 함수로 배열의 길이를 알 수 없다.)

## 동적 할당된 배열

```cpp
int length;
std::cin >> length;

int *ptr = new int[length];
```

`new`연산자의 배열 버전과 같은 `new[]`연산자를 사용한다.   
일반적인 배열과는 다른 메모리에서 할당되기 때문에 배열의 크기를 굉장히 크게 만들 수 있다.

## 동적 배열의 해제

```cpp
int *ptr = new int[size];

delete[] ptr;
```

`delete`연산자의 배열 버전과 같은 `delete[]`연산자를 사용한다.   
동적 할당된 배열을 `delete`연산자로 해제하면 의도하지 않은 동작이 발생한다.

## 동적 배열의 초기화

동적 배열을 0으로 초기화하는 방법은 아래와 같이 간단하다.

```cpp
int *ptr = new int[size] ();
```

동적 배열을 초기화하려면 원소 하나하나의 값을 정해야 했다.

하지만 C++11 부터 동적 배열을 초기화 리스트를 사용하여 초기화할 수 있다.

```cpp
int &ptr = new int[3] {1,2,3};
```

주의할 것은 동적 배열을 통해 C 스타일의 문자열로 초기화할 수 없다는 것이다.

```cpp
char *ptr = new char[4] {"HHH"};  //  에러
```