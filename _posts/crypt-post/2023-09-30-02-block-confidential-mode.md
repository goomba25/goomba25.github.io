---
title: "[Crypt] 블록 암호의 기밀성 모드"
excerpt: ""
categories:
  - Crypt
tags:
  - [Cryptography]
toc: true
toc_sticky: true

last_modified_at: 2023-09-30
---

# 🔐 기밀성 모드

블록 암호화의 기밀성 모드는 총 5 가지로 분류할 수 있습니다.

1. ECB
2. CBC
3. CFB
4. OFB
5. CTR

### ECB

<mark style="background-color: #3e3e3e; color: orange;">Electric Code Block</mark>

한 블럭의 평문을 한 블럭의 암호문으로 암호화하는 방식입니다. (N개의 n비트 블럭으로 분할)

> 특징
* 블럭 간의 독립성을 가지기 때문에 오류 확산이 발생하지 않습니다.
* 평문의 마지막 블럭에 패딩이 필요합니다. (약점)
* 암복호화 시 병렬 처리가 가능합니다.
* 동일한 평문 블럭은 동일한 암호문으로 생성됩니다. (약점)

---
### CBC

<mark style="background-color: #3e3e3e; color: orange;">Cipher Block Chaining</mark>

초기 벡터(Initialization Vector)가 존재하며, 이전 암호문(처음은 초기 벡터)과 평문을 XOR하고 나서 암호화를 수행합니다.

> 특징
* 초기 벡터(IV)의 보안이 중요합니다.
* IV는 12~20 바이트의 크기를 가집니다.
* 동일한 평문도 다른 암호문을 생성하므로 ECB의 단점이 개선됩니다.
* 평문의 마지막 블럭에 패딩이 필요합니다. (약점)
* 복호화 시에만 병렬 처리가 가능합니다. (약점)
* 비트 에러 시 해당 블럭과 다음 블럭에 오류가 발생합니다. (약점)
* MAC 알고리즘으로 활용됩니다.

---
### CFB

<mark style="background-color: #3e3e3e; color: orange;">Cipher Feedback</mark>

블록 암호화를 스트림 암호화로 변형하여 운영하는 모드입니다.
ECB, CBC 처럼 평문을 암호화 하는 것이 아닌, 초기 벡터(IV)를 암호화 합니다.

> 특징
* 이전 암호문 블럭을 반복적으로 암호화 하여 키 스트림을 생성합니다.
* 키와 평문을 XOR해서 다음 입력으로 사용합니다.
* 복호화 시에만 병렬 처리가 가능합니다. (약점)
* 패딩이 불필요 합니다.
* 동일한 평문 블럭이 동일한 암호문을 생성하지 않습니다.
* 비트 에러 시 해당 블럭과 다음 블럭에 오류가 발생합니다. (약점)

---
### OFB

<mark style="background-color: #3e3e3e; color: orange;">Output Feedback</mark>

블록 암호화를 스트림 암호화로 변형하여 운영하는 모드입니다.
CFB와 동일하게 초기 벡터(IV)를 암호화 합니다.

> 특징
* 이전 암호문 블럭을 반복적으로 암호화 하여 키 스트림을 생성합니다.
* 패딩이 불필요 합니다.
* 동일한 평문 블럭이 동일한 암호문을 생성하지 않습니다.
* 비트 에러 시 대응되는 블럭의 암호문 비트만 오류가 발생하고 확산되지 않습니다. (ECB, CBC, CFB의 단점 개선)
* 암복호화가 같은 구조를 가집니다.
* 병렬 처리가 불가능 합니다. (약점)

---
### CTR

<mark style="background-color: #3e3e3e; color: orange;">Counter</mark>

블록 암호를 스트림 암호로 변형한 운영 모드입니다.

> 특징
* 초기 벡터(IV)를 일정하게 증가시켜 Counter를 암호화 하여 키 스트림을 생성합니다.
* 위의 4 가지 모드의 단점을 개선한 모드입니다.
* 동일한 평문이 동일한 암호문을 생성하지 않습니다.
* 평문 비트 에러 시 대응되는 암호문 비트만 오류가 발생하고 확산되지 않습니다.
* 암복호화의 병렬 처리가 가능합니다.
* 패딩이 불필요 합니다.
* 암복호화가 같은 구조를 가집니다.

---

### 정리 표

| 모드 | 장점 | 단점 |
| --- | --- | --- |
| EBC | 구현이 간단<br>고속<br>암복호화 시 병렬처리 가능<br>오류 확산이 발생하지 않음 | 동일한 평문은 동일한 암호문 생성 |
| CBC | 동일한 평문이 같은 암호문이 되지 않음<br>복호화 시 병렬처리 가능 | 암호화 병렬처리 불가능<br>비트 단위의 에러 시 현재 블록과 다음 블록에서 에러 발생 |
| CFB | 동일한 평문이 같은 암호문이 되지 않음<br>패딩 불필요<br>복호화 시 병렬처리 가능 | 암호화 병렬처리 불가능<br>비트 단위의 에러 시 현재 블록과 다음 블록에서 에러 발생 |
| OFB | 동일한 평문이 같은 암호문이 되지 않음<br>패딩 불필요<br>암복호화가 같은 구조<br>비트 에러 시 대응되는 비트만 에러 발생<br>오류 확산이 발생하지 않음 | 병렬처리 불가능 |
| CTR | 동일한 평문이 같은 암호문이 되지 않음<br>패딩 불필요<br>암복호화가 같은 구조<br>병렬처리 가능<br>비트 에러 시 대응되는 비트만 에러 발생 | 위의 단점을 모두 개선 |